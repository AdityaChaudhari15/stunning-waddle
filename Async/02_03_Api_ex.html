<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- ### Assignment 3: Create (POST) a New Post

    ### 1. Problem
    Create a simple form:
    - Title (text input)
    - Body (textarea)
    - Submit button

    When user submits, send a **POST request** to
    `https://jsonplaceholder.typicode.com/posts`
    You should send `{ title, body, userId: 1 }` as JSON.
    Then show the response from the server on the page.

    ### 2. Requirements
    - Use `method: "POST"`.
    - Send headers: `Content-Type: "application/json"`.
    - Use `JSON.stringify(...)`.
    - If server responds with success, show: `"Post created with id: <id>"`.
    - If server responds with error status, show: `"Server error: <status>"`.
    - If network fails, show: `"Network error"`. -->

    <form action="">
        <input type="text" id="title" placeholder="Title"><br><br>
        <textarea id="body" placeholder="Body"></textarea><br><br>
        <button type="button" id="submitBtn">Submit</button>
        <div id="response"></div>

        <script>
            let submitBtn = document.getElementById('submitBtn');
            let responseDiv = document.getElementById('response');

            submitBtn.addEventListener('click', () => {
                let title = document.getElementById('title').value;
                let body = document.getElementById('body').value;

                fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title: title,
                        body: body,
                        userId: 1
                    })
                })
                .then(res => {
                    if (!res.ok) {
                        throw new Error(`Server error: ${res.status}`);
                    }
                    return res.json();
                })
                .then(data => {
                    responseDiv.innerHTML = `Post created with id: ${data.id}`;
                })
                .catch(err => {
                    if (err.message.startsWith('Server error')) {
                        responseDiv.innerHTML = err.message;
                    } else {
                        responseDiv.innerHTML = 'Network error';
                    }
                });
            });
        </script>
    </form>
</body>
</html>